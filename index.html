<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“Š ìœ íŠœë¸Œ ìˆ˜ìµí™” ì˜ˆì¸¡ê¸°</title>
  <meta name="description" content="ìœ íŠœë¸Œ ì±„ë„ì˜ ìˆ˜ìµí™” ìƒíƒœ, ì˜ˆìƒ ìˆ˜ìµ, ê°€ì…ì¼, êµ­ê°€ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!">
  <meta name="keywords" content="ìœ íŠœë¸Œ ìˆ˜ìµí™”, ìœ íŠœë¸Œ ì˜ˆì¸¡ê¸°, ì±„ë„ ë¶„ì„, ì˜ˆìƒ ìˆ˜ìµ">
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f4f9; padding: 30px; }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      text-align: center;
    }
    input, button {
      padding: 12px;
      font-size: 16px;
      width: 100%;
      margin-top: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover { background: #45a049; }
    .result {
      margin-top: 20px;
      background: #f1fdf7;
      border: 1px solid #d9efe2;
      border-radius: 12px;
      padding: 20px;
      text-align: left;
    }
    .profile-img {
      border-radius: 50%;
      width: 80px;
      height: 80px;
      display: block;
      margin: 0 auto 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ“Š ìœ íŠœë¸Œ ìˆ˜ìµí™” ì˜ˆì¸¡ê¸°</h2>
    <input type="text" id="urlInput" placeholder="ìœ íŠœë¸Œ ì±„ë„ URL ì…ë ¥ (ì˜ˆ: https://www.youtube.com/@ì±„ë„ëª…)">
    <select id="countrySelect">
      <option value="KR">ğŸ‡°ğŸ‡· í•œêµ­</option>
      <option value="US">ğŸ‡ºğŸ‡¸ ë¯¸êµ­</option>
      <option value="JP">ğŸ‡¯ğŸ‡µ ì¼ë³¸</option>
      <option value="IN">ğŸ‡®ğŸ‡³ ì¸ë„</option>
    </select>
    <button onclick="checkMonetization()">ì˜ˆì¸¡í•˜ê¸° ğŸš€</button>
    <div class="result" id="result"></div>
  </div>

  <script>
    async function checkMonetization() {
      const inputUrl = document.getElementById("urlInput").value;
      const country = document.getElementById("countrySelect").value;
      const apiKey = "AIzaSyDuBjP3YfWCS1Vc82Sg-28l1JEPFomDb18"; // YouTube API í‚¤ ì…ë ¥

      const channelId = await getChannelId(inputUrl, apiKey);
      if (!channelId) {
        document.getElementById("result").innerText = "ì±„ë„ IDë¥¼ ì¶”ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        return;
      }

      const res = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${channelId}&key=${apiKey}`);
      const data = await res.json();
      const info = data.items?.[0];
      if (!info) {
        document.getElementById("result").innerText = "ì±„ë„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
        return;
      }

      const stats = info.statistics;
      const snippet = info.snippet;
      const views = parseInt(stats.viewCount);
      const profile = snippet.thumbnails.default.url;
      const date = new Date(snippet.publishedAt);
      const months = getMonthsSince(date);
      const cpm = getCpmRange(country);
      const revenueLow = (views / 1000) * cpm.low;
      const revenueHigh = (views / 1000) * cpm.high;

      document.getElementById("result").innerHTML = `
        <img src="${profile}" class="profile-img">
        <strong>ğŸ“› ì±„ë„ëª…:</strong> ${snippet.title}<br>
        <strong>ğŸ“… ê°€ì…ì¼:</strong> ${date.toLocaleDateString()} (${months}ê°œì›” ì „)<br>
        <strong>ğŸŒ êµ­ê°€:</strong> ${country}<br>
        <strong>ğŸ‘¥ êµ¬ë…ì:</strong> ${stats.subscriberCount || 'ë¹„ê³µê°œ'}<br>
        <strong>ğŸ“ˆ ì¡°íšŒìˆ˜:</strong> ${views.toLocaleString()}<br>
        <strong>ğŸ’° ì˜ˆìƒ ìˆ˜ìµ:</strong> $${revenueLow.toFixed(2)} ~ $${revenueHigh.toFixed(2)}
      `;
    }

    async function getChannelId(url, apiKey) {
      if (url.includes("/channel/")) return url.split("/channel/")[1];
      if (url.includes("@")) {
        const handle = url.split("@")[1];
        const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=${handle}&key=${apiKey}`);
        const data = await res.json();
        return data.items?.[0]?.snippet?.channelId;
      }
      return null;
    }

    function getCpmRange(country) {
      const cpm = {
        KR: { low: 0.5, high: 2.0 },
        US: { low: 1.5, high: 4.5 },
        JP: { low: 1.0, high: 3.0 },
        IN: { low: 0.3, high: 1.2 }
      };
      return cpm[country] || cpm['KR'];
    }

    function getMonthsSince(date) {
      const now = new Date();
      return (now.getFullYear() - date.getFullYear()) * 12 + (now.getMonth() - date.getMonth());
    }
  </script>
</body>
</html>
